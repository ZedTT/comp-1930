<!DOCTYPE html>
<b lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>ToyShare: Canada's No.1 Toy Donation/Sell Center</title>

        <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans" rel="stylesheet">
        <link rel="icon" href="toyShareLogopng.png">

        <link rel="stylesheet" href="css/asRange.css">
        <script src="JQuery.js"></script>
        <script src="jquery-asRange.js"></script>

        <script src="https://www.gstatic.com/firebasejs/5.8.5/firebase.js"></script>
        <script>
            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyBwSxJojnYNo9ZFKHmO59sKVPdEhCR641A",
                authDomain: "comp1930database.firebaseapp.com",
                databaseURL: "https://comp1930database.firebaseio.com",
                projectId: "comp1930database",
                storageBucket: "comp1930database.appspot.com",
                messagingSenderId: "908131063499"
            };
            firebase.initializeApp(config);
        </script>
        <link href="https://fonts.googleapis.com/css?family=Gloria+Hallelujah" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="public/css/style.css">
        <style></style>
    </head>

    <body>
        <div class="header2 dropShadow">
            <div id="left">
                <a href="databaseTest.html">
                    <img src="toyShareLogopng.png" alt="toyShareLogo" id="toyShareLogo">
                    <h1 id="toyShareText">ToyShare</h1>
                </a>
            </div>
            <input class="searchBar" type="search" placeholder="Search for toys...." />
            <div id="right">
                <div id="buttons">
                    <div class="messageButton"><img src="https://static.thenounproject.com/png/367821-200.png"
                            alt="msgButton"></div>
                    <div class="favouritesButton">Saved</div>
                    <div class="profileButton">
                        <img src="https://teambodyproject.com/wp-content/uploads/2019/01/profile-icon.png"
                            alt="profileSetting" id="profileSetting"></div>
                </div>
            </div>
        </div>
        <div id="content">

            <div id="filtersContainer" class="dropShadow">
                <div id="filters">
                    <h3>Filters</h3>
                    <div class="filter">
                        <div class="filterTitle sliderTitle">Price:</div>
                        <input class="priceSlider slider" type="range" min="0" max="100" name="price" step="1" />
                    </div>
                    <div class="filter">
                        <div class="filterTitle sliderTitle">Age:</div>
                        <input class="ageSlider slider" type="range" min="0" max="20" name="age" step="1" />
                    </div>
                    <div>sliders coutesy of <a
                            href="https://github.com/thecreation/jquery-asRange">github.com/thecreation/</a></div>
                </div>
            </div>
            <div id="listingsContainer" class="dropShadow"></div>
            <div id="ads" class="dropShadow">
                <div class="wasteInfo">
                    <img src="http://thearenaweekly.myschoolarena.com/wp-content/uploads/2018/04/doctor.jpg"
                        alt="Kid Playing With Toy">
                    <div id="message">
                        <p>Global plastics consumption is predicted to grow dramatically.</p>
                        <p>Please reuse!</p>
                    </div>
                </div>
                <div class="learnMore">Learn more on how to donate at your local ToyShare.
                    <div class="learnMoreButton" onclick="location.href='https://www.reddit.com/';"
                        style="cursor:pointer;">
                        Learn More</div>
                </div>
                <div class="ecoCityAd1"><a href="http://ecocity2019.com/" target="blank"><img
                            src="http://ecocity2019.com/wp-content/uploads/2018/09/ecocity_web_logo.png"
                            alt="Dead Fish"></a> </div>
            </div>
        </div>

        <script src="public/js/domlibrary.js"></script>

        <script src="public/js/initializeListings.js"></script>

        <script>
            // an example for future usage - currently doesn't do anything
            // Favorite Button - Heart
            $('.favme').click(function () {
                $(this).toggleClass('active');
            });

            /* when a user clicks, toggle the 'is-animating' class */
            $(".favme").on('click touchstart', function () {
                $(this).toggleClass('is_animating');
            });

            /*when the animation is over, remove the class*/
            $(".favme").on('animationend', function () {
                $(this).toggleClass('is_animating');
            });
        </script>

        <script>
            // unused right now because it called the database too often
            // this is the function that filters the page
            function filterPlus(minPrice, maxPrice, minAge, maxAge) {
                // this is the reference to our database, specifically the toys
                dbRef = firebase.database().ref().child("Toys");
                // this function runs every time the database has a change
                dbRef.on('value', function (snapshot) {
                    // IMPORTANT: clear the old listings before adding updated ones 
                    listingsContainer.innerHTML = "";
                    // a loop for each toy
                    snapshot.forEach(function (snap) {
                        // grabbing values from the database
                        priceVal = snap.child("Price").val();
                        ageMaxVal = snap.child("Age_Max").val();
                        ageMinVal = snap.child("Age_Min").val();
                        // the actual filters, if any of these pass, it means the filter failed, return ends the loop
                        if (priceVal < minPrice || priceVal > maxPrice) {
                            return;
                        }
                        if (maxAge < ageMinVal || minAge > ageMaxVal) {
                            return;
                        }
                        // Calls the create listing function with a single toys data. We only get to this point if both filters pass
                        createListing(snap);
                    });
                });
            };
        </script>
        <script src="public/js/sliderFilters.js"></script>
        <script src="public/js/offlinetest.js"></script>
        <script src="public/js/fixfilters.js"></script>
        <script src="public/js/changetext.js"></script>
    </body>

    </html>